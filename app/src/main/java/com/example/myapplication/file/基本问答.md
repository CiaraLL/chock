# Fragment和Activity数据互传

## 1.Activity 给 fragment 传数据

setArguments(Bundle bundle)

## 2.fragment 给 Activity 传数据

广播/eventBus/自定义接口

## 3.activity给Actiivty

### startactivity的时候使用intent

    intent.putExtra（new Bundle）一般复杂数据
    intent.putExtra（序列化对象）数据大的

## 4.fragment给Fragment
https://blog.csdn.net/sinat_31057219/article/details/77743704

### set方法
1、在(接收方)的fragment中设置setData方法

        public void setData(String string) {
            bt_main.setText(string);
        }
2、在(发送方)获取(接收方)的fragment，并调用setData方法

    // 方法一：在MainFragment中设置一个setData()方法，在方法中设置更改按钮名称
    MainFragment mainFragment = (MainFragment)getActivity().getSupportFragmentManager().findFragmentByTag("mainFragment");
    mainFragment.setData(mDatas.get(position));

    被发送方设置setdata方法
    发送方通过getSurpportManager获取 ，设置listener

### 自定义接口回调
    发送方实现一个listeners传递给接受方，接收方取出数据使用；

### eventBus


# Android 如何传递参数给H5

## 1.使用URL参数传递 ,最简单的方式是通过URL参数将数据传递给H5页面。

Android可以通过WebView的loadUrl()方法加载带有参数的URL，H5页面可以通过解析URL来获取参数值。
首先，在Android端构造带有参数的URL，然后加载该URL到WebView中：

        WebView webView = findViewById(R.id.webView); 
        String param1 = "value1";
        String param2 = "value2";
        String url = " + param1 + "&param2=" + param2;
        webView.loadUrl(url);

在H5页面中，可以通过解析URL获取参数值：

        function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
        }
    
        var param1 = getParameterByName('param1');
        var param2 = getParameterByName('param2');

## 2.使用JavascriptInterface传递参数

另一种方式是通过JavascriptInterface在Android端和H5页面之间建立桥梁，实现双向通信。
Android可以通过addJavascriptInterface()方法将一个Java对象注入到WebView中，H5页面可以通过该对象调用Android端的方法获取参数值。

首先，在Android端创建一个Java对象，并将其注入到WebView中：

       public class MyJavascriptInterface {
       @JavascriptInterface
       public String getParam1() {
       return "value1";
       }
    
       @JavascriptInterface
       public String getParam2() {
       return "value2";
       }
       }
       WebView webView = findViewById(R.id.webView);
       webView.getSettings().setJavaScriptEnabled(true);
       MyJavascriptInterface myJavascriptInterface = new MyJavascriptInterface();
       webView.addJavascriptInterface(myJavascriptInterface, "Android");
       webView.loadUrl()

## 3.使用WebView的evaluateJavascript方法传递参数

另一种方式是使用WebView的evaluateJavascript()方法，在Android端直接执行JavaScript代码，并传递参数给H5页面。

首先，在Android端调用evaluateJavascript()方法执行JavaScript代码：

       WebView webView = findViewById(R.id.webView);
       String param1 = "value1";
       String param2 = "value2";
       String javascript = "window.receiveParams('" + param1 + "', '" + param2 + "')";
       webView.evaluateJavascript(javascript, null);
       webView.loadUrl()

在H5页面中，可以定义一个receiveParams()函数来接收参数：

       function receiveParams(param1, param2) {
       // 处理接收到的参数...
       }
